# üîê –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ Service Account JSON

## ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!**

### üéØ **–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**

#### **–ë—ã–ª–æ (–ù–ï–ë–ï–ó–û–ü–ê–°–ù–û):**
```
WordPress Database (wp_options)
‚îú‚îÄ‚îÄ firebase_service_account_json = "{ –ø–æ–ª–Ω—ã–π JSON —Ç–µ–∫—Å—Ç —Å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –∫–ª—é—á–æ–º }"
```

#### **–°—Ç–∞–ª–æ (–ë–ï–ó–û–ü–ê–°–ù–û):**
```
WordPress Database (wp_options)
‚îú‚îÄ‚îÄ firebase_service_account_file_path = "/var/www/uploads/firebase-push-notifications/service-account-1234567890.json"

–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ (0600 - —Ç–æ–ª—å–∫–æ WordPress)
‚îú‚îÄ‚îÄ /var/www/uploads/firebase-push-notifications/service-account-1234567890.json
```

## üîß **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

### **1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞**
```
User uploads JSON from Firebase Console
    ‚Üì
Validation (JSON format, required fields)
    ‚Üì
File copies to: /wp-content/uploads/firebase-push-notifications/
    ‚Üì
File permissions: 0600 (readable only by WordPress)
    ‚Üì
File path saves to: wp_options
```

### **2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Firebase**
```
Firebase initialization
    ‚Üì
Read file path from database
    ‚Üì
Load JSON from protected file (0600)
    ‚Üì
Parse and validate
    ‚Üì
Initialize Firebase
```

## üìÅ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:**

```
/wp-content/uploads/
‚îî‚îÄ‚îÄ firebase-push-notifications/
    ‚îú‚îÄ‚îÄ service-account-1734267890.json (0600)
    ‚îú‚îÄ‚îÄ service-account-1734267891.json (0600)
    ‚îî‚îÄ‚îÄ service-account-1734267892.json (0600)
```

## üöÄ **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

### **–®–∞–≥ 1: –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–≥–∏–Ω**
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–ª–∞–≥–∏–Ω Firebase Push Notifications –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω:
1. WordPress Admin ‚Üí –ü–ª–∞–≥–∏–Ω—ã
2. Firebase Push Notifications ‚Üí –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å

### **–®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∏—Ç—å Service Account JSON**
1. **Firefox Push ‚Üí Configuration**
2. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ JSON —Ñ–∞–π–ª –∏–∑ Firebase Console**
3. **–ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"**

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –°–∫–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª –≤ –∑–∞—â–∏—â–µ–Ω–Ω—É—é –ø–∞–ø–∫—É
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ 0600
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –≤ –ë–î
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç Firebase

### **–®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å**
1. **Firebase Push ‚Üí Configuration**
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫—É—é —Ç–∞–±–ª–∏—Ü—É**
3. **Firebase –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω**

## ‚úÖ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

### **üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- ‚úÖ –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –Ω–µ –≤ –ë–î
- ‚úÖ –§–∞–π–ª –∑–∞—â–∏—â–µ–Ω –ø—Ä–∞–≤–∞–º–∏ 0600
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç —É—Ç–µ—á–µ–∫ –ë–î
- ‚úÖ –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä

### **üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (–ø—É—Ç—å –≤–º–µ—Å—Ç–æ JSON)
- ‚úÖ –ú–µ–Ω—å—à–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ –ø–æ–∏—Å–∫ –≤ –ë–î

### **üîÑ –ì–∏–±–∫–æ—Å—Ç—å:**
- ‚úÖ –õ–µ–≥–∫–æ –∑–∞–º–µ–Ω–∏—Ç—å –∫–ª—é—á
- ‚úÖ –ü—Ä–æ—Å—Ç–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª
- ‚úÖ –°—Ç–∞—Ä—ã–π —Ñ–∞–π–ª –∑–∞–º–µ–Ω–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### **üíæ –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è:**
- ‚úÖ –ë–î –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
- ‚úÖ –ù–µ—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –§–∞–π–ª —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ

## üìã **–û–ø—Ü–∏–∏ –≤ –ë–î:**

### **–°—Ç–∞—Ä—ã–µ (—É–¥–∞–ª–µ–Ω—ã):**
```php
// –ë–æ–ª—å—à–µ –ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è:
get_option('firebase_service_account_json');
```

### **–ù–æ–≤—ã–µ:**
```php
// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –í–°–ï, –Ω–æ —Ç–æ–ª—å–∫–æ –ø—É—Ç—å:
$file_path = get_option('firebase_service_account_file_path');
// /var/www/uploads/firebase-push-notifications/service-account-1234567890.json

// –ß—Ç–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏:
$json = file_get_contents($file_path);
$data = json_decode($json, true);
```

## üîç **–§–∞–π–ª–æ–≤–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è:**

```
WordPress Installation
‚îú‚îÄ‚îÄ wp-config.php
‚îú‚îÄ‚îÄ wp-content/
‚îÇ   ‚îú‚îÄ‚îÄ plugins/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ firebase-push-notifications/
‚îÇ   ‚îú‚îÄ‚îÄ themes/
‚îÇ   ‚îî‚îÄ‚îÄ uploads/
‚îÇ       ‚îî‚îÄ‚îÄ firebase-push-notifications/ (NEW)
‚îÇ           ‚îî‚îÄ‚îÄ service-account-[timestamp].json (0600)
‚îî‚îÄ‚îÄ wp-admin/
```

## üéØ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ:**

```php
// –ü–æ–ª—É—á–∏—Ç—å –ø—É—Ç—å
$file_path = get_option('firebase_service_account_file_path');

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ
if (file_exists($file_path) && is_readable($file_path)) {
    // –ó–∞–≥—Ä—É–∑–∏—Ç—å JSON
    $json_content = file_get_contents($file_path);
    $service_account = json_decode($json_content, true);
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Firebase
    $factory = new \Kreait\Firebase\Factory();
    $firebase = $factory->withServiceAccount($service_account)->create();
}
```

## üìö **–°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**

- `class-firebase-manager.php` - –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ —Ñ–∞–π–ª–∞
- `firebase-config.php` - –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏
- `fix-json.php` - –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª –≤ –∑–∞—â–∏—â–µ–Ω–Ω—É—é –ø–∞–ø–∫—É
- `SERVICE_ACCOUNT_FILE_STORAGE_SECURITY.md` - –ü–æ–¥—Ä–æ–±–Ω–æ –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## ‚ö†Ô∏è **–í–∞–∂–Ω–æ:**

### **–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–ª–∞–≥–∏–Ω–∞:**
- ‚úÖ –°—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è)
- ‚úÖ –ü—É—Ç—å –≤ –ë–î —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- ‚úÖ Firebase –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

### **–ü—Ä–∏ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–ª–∞–≥–∏–Ω–∞:**
- ‚ö†Ô∏è –§–∞–π–ª—ã –ù–ï —É–¥–∞–ª—è—é—Ç—Å—è (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
- ‚ö†Ô∏è –ü—É—Ç—å –≤ –ë–î —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- ‚ö†Ô∏è –ü—Ä–∏ –ø–µ—Ä–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ

### **–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–ª–∞–≥–∏–Ω–∞:**
- –í—ã –¥–æ–ª–∂–Ω—ã –≤—Ä—É—á–Ω—É—é —É–¥–∞–ª–∏—Ç—å –ø–∞–ø–∫—É:
  ```bash
  rm -rf /wp-content/uploads/firebase-push-notifications/
  ```

## ‚úÖ **–°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–∏:**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------|---------|
| FirebaseManager | ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω | –ó–∞–≥—Ä—É–∂–∞–µ—Ç JSON –∏–∑ —Ñ–∞–π–ª–∞ |
| Firebase Config Page | ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ | –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–ª—å–∫–æ –ø—É—Ç—å |
| Fix JSON Tool | ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω | –ö–æ–ø–∏—Ä—É–µ—Ç –≤ protected folder |
| File Permissions | ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã | 0600 (—Ç–æ–ª—å–∫–æ WordPress) |
| Database Cleanup | ‚è≥ –†—É—á–Ω–æ | –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |

## üöÄ **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤. üéâ
